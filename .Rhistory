runApp()
runApp()
# Load the processing functions
source("process.R")
runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
source("process.R")
employment <- processEmployment('data/employment.csv')
employment
str(employment)
source("process.R")
employment <- processEmployment('data/employment.csv')
str(employment)
shiny::runApp()
head(analytics)
unique(analytics$sex)
cor(analytics$obesity, analytics$value)
analytics
tmp <- analytics %>% group_by(country) %>%
tmp <- analytics %>% group_by(country)
cor(tmp$obesity, tmp$value)
rm(tmp)
analytics %>% group_by(country) %>% cor(obesity, vvalue
)
analytics %>% group_by(country) %>% cor(obesity, value)
analytics %>% group_by(country, activity)
analytics %>% group_by(country, activity) %>% cor(obesity, value)
cor(analytics$obe)
cor(analytics$obesity, analytics$activity)
desktop <- analytics %>% filter(activity == 'D')
manual <- analytics %>% filter(activity == 'M')
cor(desktop$obesity, desktop$value)
by(desktop, desktop$country, FUN = function(X) cor(X$obesity, X$value))
analytics %>% group_by(country, activity) %>% summarize(correlation = cor(obesity, value))
analytics %>% group_by(country, activity) %>% summarize(correlation = cor(obesity, value)) %>% drop_na()
View(employment)
View(manual)
View(obesity)
rm(manual, desktop)
analyticsCorrelationTable <- function(){
return (analytics %>%
group_by(country, activity) %>%
summarize(correlation = cor(obesity, value)) %>%
drop_na()
)
}
analyticsCorrelationTable()
ggplot(analyticsCorrelationTable(), aes(x = country, y = activity, fill = correlation)) + geom_tile()
ggplot(analyticsCorrelationTable(), aes(x = country, y = activity, fill = correlation)) + geom_tile() + scale_fill_distiller()
ggplot(analyticsCorrelationTable(), aes(x = country, y = activity, fill = correlation)) + geom_tile() + scale_fill_viridis()
ggplot(analyticsCorrelationTable(), aes(x = country, y = activity, fill = correlation)) + geom_tile() + theme(axis.text.x = element_text(angle = 45)
)
ggplot(analyticsCorrelationTable(), aes(x = country, y = activity, fill = correlation)) + geom_tile() + theme(axis.text.x = element_text(angle = 90))
analyticsCorrelationTable
analyticsCorrelationTable()
ggplot(analyticsCorrelationTable(), aes(x = country, y = activity, fill = correlation, color = correlation)) + geom_tile() + theme(axis.text.x = element_text(angle = 90))
ggplot(analyticsCorrelationTable(), aes(x = country, y = activity, fill = correlation)) + geom_tile() + theme(axis.text.x = element_text(angle = 90))
ggplot(analyticsCorrelationTable(), aes(x = country, y = activity, fill = correlation)) + geom_tile() + theme(axis.text.x = element_text(angle = 90)) + scale_fill_gradient(low="red", high="blue")
ggplot(analyticsCorrelationTable(), aes(x = country, y = activity, fill = correlation)) + geom_tile() + theme(axis.text.x = element_text(angle = 90)) + scale_fill_gradientn(colours = c("blue", "white", "red"), values = c(1, 0, -1))
ggplot(analyticsCorrelationTable(), aes(x = country, y = activity, fill = correlation)) + geom_tile() + theme(axis.text.x = element_text(angle = 90)) + scale_fill_gradientn(colours = c("blue", "white", "red"))
ggplot(analyticsCorrelationTable(), aes(x = country, y = activity, fill = correlation)) + geom_tile() + theme(axis.text.x = element_text(angle = 90)) + scale_fill_gradientn(colours = c("blue", "white", "red"), values = c(1, 0, -1))
ggplot(analyticsCorrelationTable(), aes(x = country, y = activity, fill = correlation)) + geom_tile() + theme(axis.text.x = element_text(angle = 90)) + scale_fill_gradientn(colours = c("red", "white", "blue"))
ggplot(analyticsCorrelationTable(), aes(x = country, y = activity, fill = correlation)) + geom_tile(height = 200) + theme(axis.text.x = element_text(angle = 90)) + scale_fill_gradientn(colours = c("red", "white", "blue"))
ggplot(analyticsCorrelationTable(), aes(x = country, y = activity, fill = correlation)) + geom_tile(height = 100) + theme(axis.text.x = element_text(angle = 90)) + scale_fill_gradientn(colours = c("red", "white", "blue"))
ggplot(analyticsCorrelationTable(), aes(x = country, y = activity, fill = correlation)) + geom_tile() + theme(axis.text.x = element_text(angle = 90)) + scale_fill_gradientn(colours = c("red", "white", "blue"))
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
?facet_wrap
runApp()
runApp()
?paste0
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
?geom_smooth
runApp()
runApp()
runApp()
runApp()
?read.csv
employment <- read.csv(pEmploymentPath, fileEncoding="UTF-8-BOM")
runApp()
runApp()
shiny::runApp()
shiny::runApp()
str(obesity)
obesity %>% filter(sex == "B") %>% groupby(continent, year) %>% summarize(obesity=mean(obesity))
obesity %>% filter(sex == "B") %>% group_by(continent, year) %>% summarize(obesity=mean(obesity))
obesity %>% filter(sex == "B") %>% group_by(continent, year) %>% summarize(obesity=sum(obesity))
obesity %>% filter(sex == "B") %>% group_by(continent, year) %>% summarize(obesity=mean(obesity))
df_continents <- obesity %>% filter(sex == "B") %>% group_by(continent, year) %>% summarize(obesity=mean(obesity))
ggplot(df_continents, aes(x=year, y=obesity, color=continent)) + geom_line()
ggplot(df_continents, aes(x=year, y=obesity, color=continent)) + geom_line() + labs(x="Year", y="Obesity (%)", color="Continent")
ggplot(df_continents, aes(x=year, y=obesity, color=continent)) + geom_line(size=2) + labs(x="Year", y="Obesity (%)", color="Continent")
ggplot(df_continents, aes(x=year, y=obesity, color=continent)) + geom_line(size=1.5) + labs(x="Year", y="Obesity (%)", color="Continent")
rm(df_continents)
ggplot(obesity %>% filter(continent == "North America", sex != "B"), aes(x=year, y=obesity, color=sex)) + geom_line(size=1.5) + labs(x="Year", y="Obesity (%)", color="Sex")
ggplot(obesity %>% filter(continent == "North America", sex != "B") %>% group_by(year, sex) %>% summarize(obesity=mean(obesity)), aes(x=year, y=obesity, color=sex)) + geom_line(size=1.5) + labs(x="Year", y="Obesity (%)", color="Sex")
ggplot(obesity %>% filter(continent == "North America", sex != "B") %>% group_by(year, sex) %>% summarize(obesity=mean(obesity)), aes(x=year, y=obesity, color=sex)) + geom_line(size=1.5) + labs(x="Year", y="Obesity (%)", color="Sex", title="Evolution of obesity percentage in North America between 1975 and 2016")
ggplot(obesity %>% filter(continent == "South America", sex != "B") %>% group_by(year, sex) %>% summarize(obesity=mean(obesity)), aes(x=year, y=obesity, color=sex)) + geom_line(size=1.5) + labs(x="Year", y="Obesity (%)", color="Sex", title="Evolution of obesity percentage in South America between 1975 and 2016")
ggplot(obesity %>% filter(continent == "Europe", sex != "B") %>% group_by(year, sex) %>% summarize(obesity=mean(obesity)), aes(x=year, y=obesity, color=sex)) + geom_line(size=1.5) + labs(x="Year", y="Obesity (%)", color="Sex", title="Evolution of obesity percentage in Europe between 1975 and 2016")
ggplot(obesity %>% filter(continent == "Oceania", sex != "B") %>% group_by(year, sex) %>% summarize(obesity=mean(obesity)), aes(x=year, y=obesity, color=sex)) + geom_line(size=1.5) + labs(x="Year", y="Obesity (%)", color="Sex", title="Evolution of obesity percentage in Oceanie between 1975 and 2016")
ggplot(obesity %>% filter(continent == "Asia", sex != "B") %>% group_by(year, sex) %>% summarize(obesity=mean(obesity)), aes(x=year, y=obesity, color=sex)) + geom_line(size=1.5) + labs(x="Year", y="Obesity (%)", color="Sex", title="Evolution of obesity percentage in Asia between 1975 and 2016")
employment %>% filter(sex == "B", activity != "U") %>% group_by(year, activity) %>% summarize(value=sum(value))
employment %>% filter(sex == "B", activity != "?") %>% group_by(year, activity) %>% summarize(value=sum(value))
ggplot(employment %>% filter(sex == "B", activity != "?") %>% group_by(year, activity) %>% summarize(value=sum(value)), aes(x=year, y=value, color=activity)) + geom_smooth()
ggplot(employment %>% filter(sex == "B", activity != "?") %>% group_by(year, activity) %>% summarize(value=sum(value)), aes(x=year, y=value, color=activity)) + geom_smooth() + geom_point()
ggplot(employment %>% filter(sex == "B", activity != "?") %>% group_by(year, activity) %>% summarize(value=sum(value)), aes(x=year, y=value, color=activity)) + geom_line(size=1.5)
ggplot(employment %>% filter(sex == "B", activity != "?") %>% group_by(year, activity) %>% summarize(value=sum(value)), aes(x=year, y=value, color=activity)) + geom_line(size=1.5) + labs(x="Year", y="Number of employees", color="Type of activity") +  scale_color_manual(labels=c("D"="Desktop activities", "M"="Manual activities"))
ggplot(employment %>% filter(sex == "B", activity != "?") %>% group_by(year, activity) %>% summarize(value=sum(value)), aes(x=year, y=value, color=activity)) + geom_line(size=1.5) + labs(x="Year", y="Number of employees", color="Type of activity") +  scale_color_manual(values = c("D" = "blue", "M" = "red"), labels=c("D"="Desktop activities", "M"="Manual activities"))
colors()
ggplot(employment %>% filter(sex == "B", activity != "?") %>% group_by(year, activity) %>% summarize(value=sum(value)), aes(x=year, y=value, color=activity)) + geom_line(size=1.5) + labs(x="Year", y="Number of employees", color="Type of activity") +  scale_color_manual(values = c("D" = "burlywood", "M" = "darkgoldenrod"), labels=c("D"="Desktop activities", "M"="Manual activities"))
ggplot(employment %>% filter(sex == "B", activity != "?") %>% group_by(year, activity) %>% summarize(value=sum(value)), aes(x=year, y=value, color=activity)) + geom_line(size=1.5) + labs(x="Year", y="Number of employees", color="Type of activity") +  scale_color_manual(values = c("D" = "brown3", "M" = "darkgoldenrod"), labels=c("D"="Desktop activities", "M"="Manual activities"))
ggplot(employment %>% filter(sex == "B", activity != "?") %>% group_by(year, activity) %>% summarize(value=sum(value)), aes(x=year, y=value, color=activity)) + geom_line(size=1.5) + labs(x="Year", y="Number of employees", color="Type of activity") +  scale_color_manual(values = c("D" = "brown", "M" = "darkgoldenrod"), labels=c("D"="Desktop activities", "M"="Manual activities"))
ggplot(employment %>% filter(sex == "B", activity != "?") %>% group_by(year, activity) %>% summarize(value=sum(value)), aes(x=year, y=value, color=activity)) + geom_line(size=1.5) + labs(x="Year", y="Number of employees", color="Type of activity") +  scale_color_manual(values = c("D" = "purple2", "M" = "darkgoldenrod"), labels=c("D"="Desktop activities", "M"="Manual activities"))
ggplot(employment %>% filter(sex == "B", activity != "?") %>% group_by(year, activity) %>% summarize(value=sum(value)), aes(x=year, y=value, color=activity)) + geom_line(size=1.5) + labs(x="Year", y="Number of employees", color="Type of activity") +  scale_color_manual(values = c("D" = "darkviolet", "M" = "darkgoldenrod"), labels=c("D"="Desktop activities", "M"="Manual activities"))
ggplot(employment %>% filter(sex == "B", activity != "?") %>% group_by(year, activity) %>% summarize(value=sum(value)), aes(x=year, y=value, color=activity)) + geom_line(size=1.5) + labs(x="Year", y="Number of employees", color="Type of activity", title="Evolution of employment by activity type") +  scale_color_manual(values = c("D" = "darkviolet", "M" = "darkgoldenrod"), labels=c("D"="Desktop activities", "M"="Manual activities"))
ggplot(employment %>% filter(sex == "B", activity != "?", country %in% c("France", "Greece")) %>% group_by(year, activity) %>% summarize(value=sum(value)), aes(x=year, y=value, color=activity)) + geom_line(size=1.5) + labs(x="Year", y="Number of employees", color="Type of activity", title="Evolution of employment by activity type") +  scale_color_manual(values = c("D" = "darkviolet", "M" = "darkgoldenrod"), labels=c("D"="Desktop activities", "M"="Manual activities")) + facet_wrap(~country)
ggplot(employment %>% filter(sex == "B", activity != "?", country %in% c("France", "Greece")) %>% group_by(year, activity, country) %>% summarize(value=sum(value)), aes(x=year, y=value, color=activity)) + geom_line(size=1.5) + labs(x="Year", y="Number of employees", color="Type of activity", title="Evolution of employment by activity type") +  scale_color_manual(values = c("D" = "darkviolet", "M" = "darkgoldenrod"), labels=c("D"="Desktop activities", "M"="Manual activities")) + facet_wrap(~country)
ggplot(employment %>% filter(sex == "B", activity != "?", country %in% c("France", "Greece")) %>% group_by(year, activity, country) %>% summarize(value=sum(value)), aes(x=year, y=value, color=activity)) + geom_line(size=1.5) + labs(x="Year", y="Number of employees", color="Type of activity", title="Evolution of employment by activity type") +  scale_color_manual(values = c("D" = "darkviolet", "M" = "darkgoldenrod"), labels=c("D"="Desktop activities", "M"="Manual activities")) + facet_wrap(~country, scales = "free")
ggplot(employment %>% filter(sex == "B", activity != "?", country %in% c("Austria", "Finland", "France", "Korea", "Lithuania", "Mexico", "Poland", "Russia", "New Zealand")) %>% group_by(year, activity, country) %>% summarize(value=sum(value)), aes(x=year, y=value, color=activity)) + geom_line(size=1.5) + labs(x="Year", y="Number of employees", color="Type of activity", title="Evolution of employment by activity type") +  scale_color_manual(values = c("D" = "darkviolet", "M" = "darkgoldenrod"), labels=c("D"="Desktop activities", "M"="Manual activities")) + facet_wrap(~country, scales = "free", ncol = 3)
ggplot(employment %>% filter(sex == "B", activity != "?", country %in% c("Austria", "Finland", "France", "Korea", "Lithuania", "Mexico", "Poland", "Russia", "New Zealand")) %>% group_by(year, activity, country) %>% summarize(value=sum(value)), aes(x=year, y=value, color=activity)) + geom_line(size=1.5) + labs(x="Year", y="Number of employees", color="Type of activity", title="Evolution of employment by activity type for a sample of country") +  scale_color_manual(values = c("D" = "darkviolet", "M" = "darkgoldenrod"), labels=c("D"="Desktop activities", "M"="Manual activities")) + facet_wrap(~country, scales = "free", ncol = 3)
employment %>% filter(activity=="M") %>% group_by(subject) %>% summarize(value=sum(value))
ggplot(employment %>% filter(activity=="M") %>% group_by(subject) %>% summarize(value=sum(value)), aes(x="", y="value", group="subject")) + geom_bar(stat="identity", width=1) + coord_polar("y", start=0)
ggplot(employment %>% filter(activity=="M") %>% group_by(subject) %>% summarize(value=sum(value)), aes(x="", y="value", group="subject")) + geom_bar(stat="identity", width=1)
ggplot(employment %>% filter(activity=="M") %>% group_by(subject) %>% summarize(value=sum(value)), aes(y="value", group="subject")) + geom_bar(stat="identity", width=1)
ggplot(employment %>% filter(activity=="M") %>% group_by(subject) %>% summarize(value=sum(value)), aes(x="subject", y="value", group="subject")) + geom_bar(stat="identity", width=1)
pie(employment %>% filter(activity=="M") %>% group_by(subject) %>% summarize(value=sum(value))
)
pie(employment %>% filter(activity=="M") %>% group_by(subject) %>% summarize(value=sum(value)))
manuals <- employment %>% filter(activity=="M") %>% group_by(subject) %>% summarize(value=sum(value))
pie(manuals$value, labels = manuals$subject)
library(RColorBrewer)
pie(manuals$value, labels = manuals$subject, border="white", col=brewer.pal(11, "Purples"))
len(manuals)
size(manuals)
dim(manuals)
desktops <- employment %>% filter(activity=="D") %>% group_by(subject) %>% summarize(value=sum(value))
rm(manuals)
pie(desktops$value, labels = desktops$subject, border="white", col=brewer.pal(11, "GnBu"))
analyticsHeatmapCorrelation()
ggplot(analyticsCorrelationTable(),
aes(x = country, y = activity, fill = correlation)) +
geom_tile() +
labs(
x = "Country",
y = "Activity",
fill = "Correlation",
) +
theme(
axis.text.x = element_text(angle = 90),
axis.title.x = element_text(size = 14, face = "bold"),
axis.title.y = element_text(size = 14, face = "bold"),
) +
scale_fill_gradientn(colours = c("red", "white", "blue")) +
scale_y_discrete(labels = c("D" = "Desktop", "M" = "Manual"))
)
ggplot(analyticsCorrelationTable(),
aes(x = country, y = activity, fill = correlation)) +
geom_tile() +
labs(
x = "Country",
y = "Activity",
fill = "Correlation", title="Heatmap of correlation between obesity and desk/manual jobs"
) +
theme(
axis.text.x = element_text(angle = 90),
axis.title.x = element_text(size = 14, face = "bold"),
axis.title.y = element_text(size = 14, face = "bold"),
) +
scale_fill_gradientn(colours = c("red", "white", "blue")) +
scale_y_discrete(labels = c("D" = "Desktop", "M" = "Manual"))
)
runApp()
runApp()
version
install.packages("shiny")
install.packages("shiny")
str(allPackage <- installed.packages(.Library, priority = "high"))
allPackage [, c(1,3:5)]
allPackage [, c(1,3:5)]
library(glue)
library(rnaturalearth)
library(sp)
library(leaflet)
library(DT)
library(tidyverse)
library(shiny)
library(shinydashboard)
allPackage [, c(1,3:5)]
sessionInfo()
tibble::tibble(
Package = names(installed.packages()[,3]),
Version = unname(installed.packages()[,3])
)
tibble::tibble(
Package = names(installed.packages()[,3]),
Version = unname(installed.packages()[,3])
)
packages <- tibble::tibble(
Package = names(installed.packages()[,3]),
Version = unname(installed.packages()[,3])
)
rm(allPackage)
packages[10:20,]
packages[20:30,]
install.versions("countrycode", "1.2.0")
install.packages("versions")
install.versions("countrycode", "1.2.0")
versions::install.versions("countrycode", "1.2.0")
require(devtools)
?install_version
install.packages("devtools")
install.packages("devtools")
require(devtools)
packages
install_version("yaml", version = "2.2.1")
packages <- tibble::tibble(
Package = names(installed.packages()[,3]),
Version = unname(installed.packages()[,3])
)
write.table(packages, file = "requirements.csv")
packages
write.csv(packages, file = "requirements.csv")
data.frame(packages)
write.csv(data.frame(packages), file = "requirements.csv")
read_packages <- read.csv("requirements.csv")
tail(read_csv)
tail(read_packages)
write.csv(data.frame(packages), file = "requirements.csv", row.names = FALSE)
read_packages <- read.csv("requirements.csv")
read_packages
?install_version
install_packages_version <- function(pRow){
print(pRow$Packages)
}
apply(packages, 1, install_packages_version)
install_packages_version <- function(pRow){
print(pRow[1])
}
apply(packages, 1, install_packages_version)
?devtools::install_version()
install_packages_version <- function(pRow){
devtools::install_version(pRow[1], version = pRow[2])
}
apply(packages, 1, install_packages_version)
installed.packages(priority="NA")
remove.packages(pkgs=row.names(x=installed.packages(priority="NA")))
installed.packages(priority="NA")
apply(packages, 1, install_packages_version)
shiny::runApp()
install.packages("devtools")
remove.packages(pkgs=row.names(x=installed.packages(priority="NA")))
shiny::runApp()
runApp()
install.packages("tidyverse")
runApp()
packages <- read.csv("packages.csv")
install_packs <- function{
install_packs <- function(row){
install.packages(row)
}
apply(packages, 1, install_packs)
install.packages(row)
install_packs <- function(row){
install.packages(row[1])
}
apply(packages, 1, install_packs)
remove.packages(pkgs=row.names(x=installed.packages(priority="NA")))
shiny::runApp()
shiny::runApp()
shiny::runApp()
runApp()
runApp()
install.packages(row[1])
install.packages("sp")
runApp()
shiny::runApp()
install.packages("rnaturalearth")
shiny::runApp()
shiny::runApp()
install.packages(row[1])
install.packages(row[1])
remove.packages(pkgs=row.names(x=installed.packages(priority="NA")))
shiny::runApp()
install.packages(row[1])
remove.packages(pkgs=row.names(x=installed.packages(priority="NA")))
shiny::runApp()
install.packages(row[1])
View(install_packs)
shiny::runApp()
remove.packages(pkgs=row.names(x=installed.packages(priority="NA")))
shiny::runApp()
shiny::runApp()
remove.packages(pkgs=row.names(x=installed.packages(priority="NA")))
shiny::runApp()
shiny::runApp()
remove.packages(pkgs=row.names(x=installed.packages(priority="NA")))
shiny::runApp()
install.packages(row[1])
remove.packages(pkgs=row.names(x=installed.packages(priority="NA")))
shiny::runApp()
install.packages(row[1])
obesity <- read.csv("data/obesity.csv", na = c("No data"), fileEncoding="UTF-8-BOM")
str(obesity)
remove.packages(pkgs=row.names(x=installed.packages(priority="NA")))
shiny::runApp()
install.packages(row[1])
install.packages(row[1])
install.packages(row[1])
install.packages(row[1])
install.packages(row[1])
install.packages(row[1])
install.packages(row[1])
install.packages(row[1])
install.packages(row[1])
install.packages(row[1])
View(convertSubjectToActivity)
remove.packages(pkgs=row.names(x=installed.packages(priority="NA")))
remove.packages(pkgs=row.names(x=installed.packages(priority="NA")))
shiny::runApp()
remove.packages(pkgs=row.names(x=installed.packages(priority="NA")))
shiny::runApp()
runApp()
install.packages(row[1])
install.packages(row[1])
install.packages(row[1])
install.packages(row[1])
shiny::runApp()
install.packages(row[1])
install.packages(row[1])
install.packages(row[1])
install.packages(row[1])
shiny::runApp()
install.packages(row[1])
install.packages(row[1])
install.packages(row[1])
remove.packages(pkgs=row.names(x=installed.packages(priority="NA")))
remove.packages(pkgs=row.names(x=installed.packages(priority="NA")))
shiny::runApp()
packages <- read.csv("packages.csv")
str(packages)
list(packages)
vactor(packages)
c(packages$packages)
remove.packages(pkgs=row.names(x=installed.packages(priority="NA")))
shiny::runApp()
runApp()
